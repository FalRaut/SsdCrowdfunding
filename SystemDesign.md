# Моделирование краудфандинговой системы
## Разработка диаграмм потоков данных
#### Контекстная диаграмма (DFD 0-го уровня):
![DFD_0](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/DFD.jpg)

#### Фрагмент DFD 1-го уровня (взаимодействие посетителя сайта с элементами начальной страницы):
![DFD_1(1)](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/DFD_1(1).jpg)

#### Фрагмент DFD 1-го уровня (взаимодействие модератора с элементами проверки новых проектов):
![DFD_1(2)](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/DFD_1(2).jpg)

#### Фрагмент DFD 1-го уровня (взаимодействие авторизированного пользователя с элементами начальной страницы):
![DFD_1(3)](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/DFD_1(3).jpg)

#### Фрагмент DFD 1-го уровня (взаимодействие администратора с элементами управления платформой):
![DFD_1(4)](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/DFD_1(4).jpg)

#### Фрагмент DFD 2-го уровня (декомпозиция процесса 13 «Создать проект»):
![DFD_2(1)](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/DFD_2(1).jpg)

#### Фрагмент DFD 2-го уровня (декомпозиция процесса 14 «Найти проект для финансирования»):
![DFD_2(2)](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/DFD_2(2).jpg)

## Определение структуры и элементов данных
#### Логическая модель системы:
![ERD](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/ERD.png)

#### Словарь данных:
##### Пользователь:
|Структура или <br>элемент данных|Тип данных|Длина|Значение|
| :-: | :-: | :-: | :-: |
|Идентификатор|INT|10|(PK) Первичный ключ — автоинкрементный номер записи, генерируемый системой, начиная с 1|
|Логин|VARCHAR|25|Может содержать только символы латинского алфавита, подчеркивание и цифры|
|E-mail|VARCHAR|50|Должен соответствовать стандарту RFC 5322|
|Пароль|VARCHAR|50|<p>Может содержать символы латинского алфавита, числа и символы из следующего после двоеточия списка: () ! @ # $ % ^ & ? \* \_</p><p>Остальные символы, включая пробел, запрещены</p>|
|Имя пользователя|VARCHAR|50|Может содержать все буквенно-цифровые символы, включая символы национального алфавита|
|Дата рождения|DATE|—|Используется для рекомендаций|
|(Аватар)|VARCHAR|255|Содержит путь файла|
|(Фон профиля)|VARCHAR|255|Содержит путь файла|
|(Цвет темы)|ENUM|—|В интерфейсе выбирается из выпадающего списка|
|Способ авторизации|VARCHAR|20|<p>Login</p><p>Google</p><p>Twitter</p><p>Facebook</p>|
|(Информация)|TEXT|—|Содержит дополнительную информацию, которую пользователь указывает о себе|
|(Страна проживания)|ENUM|—|В интерфейсе выбирается из выпадающего списка|
|(Пол)|BIT|1|<p>Используется для рекомендаций / рекламы манги</p><p>0 — Мужчина</p><p>1 — Женщина</p><p>NULL (то есть отсутствие значения) соответствует:</p><p>Не указан или не определен (по умолчанию)</p>|
|Платежная информация|VARCHAR|20|Содержит реквизиты пользователя|
|Любимая категория|ENUM|—|<p>Возможные значения:</p><p>Бизнес</p><p>Благотворительность</p><p>Кино</p><p>Музыка<br>Наука</p><p>Технологии и инновации</p><p>(используется для рекомендаций; в интерфейсе может не отображаться)</p>|

##### Поддерживаемый проект:
|Структура или <br>элемент данных|Тип данных|Длина|Значение|
| :- | :- | :- | :- |
|Идентификатор|INT|10|(PK) Первичный ключ — содержит идентификатор проекта|
|Сумма пожертвования|INT|10|Содержит пожертвованную пользователем на проект сумму|
|Тип вознаграждения|VARCHAR|255|Содержит описание вознаграждения|

##### Опубликованный проект:
|Структура или <br>элемент данных|Тип данных|Длина|Значение|
| :- | :- | :- | :- |
|Идентификатор|INT|10|(PK) Первичный ключ — автоинкрементный номер записи, генерируемый системой, начиная с 1|
|Описание|VARCHAR|255|Может содержать все буквенно-цифровые символы|
|Собранные средства|INT|10|Содержит сумму собранных средств|
|Необходимые средства|INT|10|Содержит сумму изначально необходимых средств|
|Категория|ENUM|—|<p>Возможные значения:</p><p>Бизнес</p><p>Благотворительность</p><p>Кино</p><p>Музыка<br>Наука</p><p>Технологии и инновации</p>|
|Дата публикации|DATE|—|Показывает релевантность проекта для спонсоров|
|Предельная дата сбора|DATE|—|Для контроля истечения срока сбора средств|
|Платежная информация|VARCHAR|20|Содержит реквизиты пользователя|
|Количество спонсоров|SMALLINT|4|Не может превышать 620 спонсоров|
|Ссылка на аккаунт автора|VARCHAR|2048|<p>Не может превышать 2048 символов</p><p>Должен соответствовать стандарту RFC 3986</p>|
|Пользователь|INT|10|(FK) Внешний ключ — содержит идентификатор пользователя|

##### Комментарий:
|Структура или <br>элемент данных|Тип данных|Длина|Значение|
| :- | :- | :- | :- |
|Идентификатор|INT|10|(PK) Первичный ключ — автоинкрементный номер записи, генерируемый системой, начиная с 1|
|Текст комментария|VARCHAR|255|Может содержать все буквенно-цифровые символы|
|Дата публикации|DATE|—|Содержит дату комментария для удобства потенциальных спонсоров|
|Имя комментатора|VARCHAR|50|Может содержать все буквенные символы|
|Опубликованный проект|INT|10|(FK) Внешний ключ — содержит идентификатор опубликованного проектов|

##### Изображение:
|Структура или <br>элемент данных|Тип данных|Длина|Значение|
| :- | :- | :- | :- |
|Идентификатор|INT|10|(PK) Первичный ключ — автоинкрементный номер записи, генерируемый системой, начиная с 1|
|Картинка|VARCHAR|255|Содержит путь файла|
|Опубликованный проект|INT|10|(FK) Внешний ключ — содержит идентификатор опубликованного проектов|

##### Аудио:
|Структура или <br>элемент данных|Тип данных|Длина|Значение|
| :- | :- | :- | :- |
|Идентификатор|INT|10|(PK) Первичный ключ — автоинкрементный номер записи, генерируемый системой, начиная с 1|
|Звук|VARCHAR|255|Содержит путь файла|
|Опубликованный проект|INT|10|(FK) Внешний ключ — содержит идентификатор опубликованного проектов|

##### Видео:
|Структура или <br>элемент данных|Тип данных|Длина|Значение|
| :- | :- | :- | :- |
|Идентификатор|INT|10|(PK) Первичный ключ — автоинкрементный номер записи, генерируемый системой, начиная с 1|
|Видео|VARCHAR|255|Содержит путь файла|
|Опубликованный проект|INT|10|(FK) Внешний ключ — содержит идентификатор опубликованного проектов|

##### Пользователь\Проект:
|Структура или <br>элемент данных|Тип данных|Длина|Значение|
| :- | :- | :- | :- |
|Идентификатор пользователя|INT|10|(PK, FK1) Составной внешний ключ — ссылка на часть составного первичного ключа «Идентификатор» таблицы «Пользователь»|
|Идентификатор проекта|INT|10|(PK, FK2) Составной внешний ключ — ссылка на часть составного первичного ключа «Идентификатор» таблицы «Опубликованный проект»|

## Моделирование контекста системы и функциональных требований
#### Диаграмма прецедентов для задач посетителя сайта:
![UC_visitor](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/UC_visitor.png)

#### Диаграмма прецедентов для задач авторизированного пользователя:
![UC_user](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/UC_user.png)

#### Диаграмма прецедентов для задач администратора:
![UC_admin](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/UC_admin.png)

#### Диаграмма прецедентов для задач модератора:
![UC_moder](https://github.com/FalRaut/SsdCrowdfunding/blob/main/images/UC_moder.png)

## Спецификация некоторых вариантов использования
#### ВИ «Авторизация посетителя»:
|Идентификатор ВИ|UC-4|
| :- | :- |
|Наименование|Авторизоваться|
|Автор|Павел Чаплыгин|
|Дата создания|13\.06.2022|
|Основное <br>действующее лицо|Посетитель сайта (неавторизованный пользователь)|
|Дополнительное действующее лицо|—|
|Описание|<p>Посетитель сайта обращается к системе, заполняет поля формы:</p><p>- Login (обязательно)</p><p>- Pass (обязательно)</p><p>и нажимает на кнопку «Авторизация»</p>|
|Приоритет|Высокий|
|Условие-триггер|Пользователь выражает намерение авторизоваться посредством взаимодействия с элементом интерфейса «Авторизация»|
|Предварительные условия|<p>PRE-1 База данных (БД) пользователей в данный момент доступна</p><p>PRE-2 отправка SMS доступна (в противном случае кнопка отправить SMS будет неактивна)</p>|
|Выходные условия|<p>POST-1 Система авторизует пользователя</p><p>POST-2 Либо осуществляется переадресация на регистрацию нового пользователя</p>|
|Основные потоки|<p>1\.0 Авторизация</p><p>1\. Система просит заполнить данные для авторизации</p><p>2\. Посетитель заполняет поля «Login» и «Pass» (1.0 E1) (1.1 Е2)</p><p>3\. Система авторизует пользователя </p>|
|Альтернативные потоки|<p>1\.1 Посетитель забыл пароль и выражает намерение восстановить доступ к аккаунту (через SMS)</p><p>1\. Система осуществляет отправку кода на номер для введенного ранее логина и открытие диалогового окна с полем для ввода кода</p><p>2\. Посетитель вводит код (1.2 Е3)</p><p>3\. Возврат к пункту 3 основного потока</p><p></p><p>1\.2 Посетитель забыл пароль и выражает намерение восстановить доступ к аккаунту (через почту)</p><p>1\. Система осуществляет отправку кода на почту (введенный ранее логин) и открытие диалогового окна с полем для ввода кода</p><p>2\. Посетитель вводит код (1.2 Е3)</p><p>3\. Возврат к пункту 3 основного потока</p>|
|Исключения|<p>1\.0 Е1 Посетитель ввел недопустимый(е) символ(ы)</p><p>1\. Система подсвечивает поля красным цветом и возвращается к пункту 1 основного потока</p><p></p><p>1\.1 Е2 Посетитель ввел неверные данные авторизации</p><p>1\. Система сообщает, что данные неверны и предлагает посетителю ввести данные повторно или осуществить восстановление доступа </p><p>1\.1 Посетитель вносит необходимые корректировки, система в свою очередь возвращается к пункту 3 основного потока</p><p>1\.2 В противном случае посетитель выбирает «восстановить доступ к аккаунту (через SMS)», система в свою очередь переходит к пункту 1.1 альтернативных потоков</p><p>1\.3 противном случае посетитель выбирает «восстановить доступ к аккаунту (через почту)», система в свою очередь переходит к пункту 1.2 альтернативных потоков</p><p></p><p>1\.2 Е3 Посетитель ввел неверный код</p><p>1\. Система сообщает, что код неверен, предлагает посетителю ввести код повторно и возвращается к пункту 2 соответствующего альтернативного потока (1.1 или 1.2)</p>|
|Бизнес-правила|(в рамках данной работы не заданы)|
|Другая информация|1\. Пользователь может завершить вариант использования в любой момент, нажав на кнопку «Закрыть»|
|Предположения|—|

#### ВИ «Спонсирование проекта»:
|Идентификатор ВИ|UC-12|
| :- | :- |
|Наименование|Спонсировать проект|
|Автор|Павел Чаплыгин|
|Дата создания|13\.06.2022|
|Основное <br>действующее лицо|Авторизированный спонсор|
|Дополнительное действующее лицо|Сервис электронных платежей|
|Описание|Спонсор обращается к системе, выбирает проект, заполняет форму спонсирования и осуществляет перевод денежных средств|
|Приоритет|Высокий|
|Условие-триггер|<p>Спонсор выражает намерение спонсировать проект посредством взаимодействия с элементом интерфейса «Спонсировать проект», заполняет форму:</p><p>- Тип вознаграждения (необязательно)</p><p>- Сумма спонсирования (необязательно, установлена по умолчанию)</p><p>- Платежная информация (обязательно)</p>|
|Предварительные условия|<p>PRE-1 Клиент выполнил вход в систему (в противном случае спонсирование проекта невозможно)</p><p>PRE-2 БД проектов в данный момент доступна</p>|
|Выходные условия|<p>POST-1 Информация о спонсировании сохранена в БД</p><p>POST-2 Денежные средства переведены на счет платформы для хранения</p>|
|Основные потоки|<p>1\.0 Спонсирование проекта</p><p>1\. Спонсор просматривает список доступных для спонсирования проектов</p><p>2\. Система отображает список доступных для спонсирования проектов</p><p>3\. Спонсор выбирает проект</p><p>4\. Система просит заполнить данные для осуществления спонсирования</p><p>5\. Спонсор заполняет форму (1.1) (1.2) (1.0 Е1) (1.1 Е2)</p><p>6\. Система просит проверить заполненную форму</p><p>7\. Спонсор подтверждает, что оформление заказа завершено</p><p>8\. Система выполняет транзакцию</p><p>9\. Спонсор подтверждает транзакцию</p><p>10\. Система сохраняет информацию о спонсировании в БД</p>|
|Альтернативные потоки|<p>1\.1 Спонсор желает предложить свой тип вознаграждения</p><p>1\. Спонсор делает запрос на оформление индивидуального типа вознаграждения</p><p>2\. Система отправляет данный запрос автору проекта (далее вопрос решается в индивидуальном порядке через администратора)</p><p>3\. Система завершает вариант использования</p><p></p><p>1\.2 Спонсор желает перевести сумму больше, чем установленная по умолчанию</p><p>1\. Спонсор вводит желаемую сумму (1.2 Е2)</p><p>2\. Возврат к пункту 6 основного потока</p>|
|Исключения|<p>1\.0 Е1 Платежная информация недействительна</p><p>1\. Система сообщает спонсору, что платежная информация недействительна</p><p>1\.1 Если спонсор отменяет оформление спонсорства, то система завершает вариант использования</p><p>1\.2 В противном случае спонсор желает изменить платежную информацию, система переходит к пункту 4 основного потока</p><p></p><p>1\.1 Е2 Форма заполнена некорректно</p><p>1\. Система подсвечивает поля красным цветом и возвращается к пункту 4 основного потока</p><p></p><p>1\.2 Е3 Введенная спонсором сумма меньше суммы по умолчанию</p><p>1\. Система сообщает спонсору, что введенная им сумма недопустима</p><p>2\. Возврат к пункту 4 основного потока</p>|
|Бизнес-правила|(в рамках данной работы не заданы)|
|Другая информация|1\. Клиент должен иметь возможность отменить оформление спонсирования в любой момент до подтверждения транзакции|
|Предположения|—|

